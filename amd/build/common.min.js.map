{"version":3,"file":"common.min.js","sources":["../src/common.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\nimport customcontent from \"./staticajax!getCustomContentData\";\nimport coursecustomfields from \"./staticajax!getCourseCustomFields\";\n\n/**\n * Common values helper for the Moodle tiny_filtercodes plugin.\n *\n * @module     tiny_filtercodes\n * @author      Leon Camus\n * @copyright   2025 onwards Leon Camus\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const pluginName = 'tiny_filtercodes/plugin';\nexport const component = 'tiny_filtercodes';\nexport const classNonEditable = 'mceNonEditable';\nexport const classFiltercode = 'filtercodes-tag';\nexport const classFiltercodeBegin = 'filtercodes-begin';\nexport const classFiltercodeEnd = 'filtercodes-end';\nexport const classFiltercodeError = 'filtercodes-error';\nexport const classFiltercodeLevel = (i) => 'filtercodes-level-' + (i % 10);\nexport const classFiltercodeLevels = Array.from({ length: 10 }, (_, i) => classFiltercodeLevel(i));\nexport const regexTagStartEnd = /\\{(\\/)?\\s*([a-zA-Z0-9]+)((?:\\s+[^}\\s]+)+)?\\s*}/g;\n\n/**\n * @typedef {'groupidnumber'\n * | 'groupidnumber*'\n * | 'groupidnumber+'\n * | 'groupidnumber?'\n * | 'groupingidnumber'\n * | 'groupingidnumber*'\n * | 'groupingidnumber+'\n * | 'groupingidnumber?'\n * | 'courseid'\n * | 'courseid*'\n * | 'courseid+'\n * | 'courseid?'\n * | 'categoryid'\n * | 'categoryid*'\n * | 'categoryid+'\n * | 'categoryid?'\n * | SelectArg\n * | TextArg\n * } FiltercodeArgType\n */\n\n\nexport class SelectArg {\n    /**\n     * @param {string} id\n     * @param {({langkey: string, value: string}|string)[]} values\n     * @param {boolean} allowCustom\n     * @param {boolean} multiple\n     * @param {boolean} empty\n     */\n    constructor(id, values, allowCustom = false, multiple = false, empty = false) {\n        this.id = id;\n        this.values = values;\n        this.allowCustom = allowCustom;\n        this.multiple = multiple;\n        this.empty = empty;\n    }\n}\n\nexport class TextArg {\n    /**\n     * @param {string} id\n     * @param {boolean} empty\n     * @param {string} placeholder\n     */\n    constructor(id, empty = false, placeholder = '') {\n        this.id = id;\n        this.empty = empty;\n        this.placeholder = placeholder;\n    }\n}\n\nexport class QuotedTextArg {\n    /**\n     * @param {string} id\n     * @param {string} placeholder\n     */\n    constructor(id, placeholder = '') {\n        this.id = id;\n        this.placeholder = placeholder;\n    }\n}\n\nexport class Filtercode {\n    /**\n     * @param {string} id\n     * @param {FiltercodeArgType[]} args\n     * @param {boolean} around\n     * @param {StringRequest|null} stringRequest\n     * @param {StringRequest|null} descriptionStringRequest\n     */\n    constructor(id, args, around, stringRequest = null, descriptionStringRequest = null) {\n        this.id = id;\n        this.args = args;\n        this.around = around;\n        this.stringRequest = stringRequest;\n        this.descriptionStringRequest = descriptionStringRequest;\n    }\n\n    /**\n     * @param  {string[]} args\n     * @param  {string?} color\n     * @returns {HTMLSpanElement}\n     */\n    beginSpan(args, color) {\n        const node = document.createElement('span');\n        node.classList.add(classFiltercode);\n        node.classList.add(classNonEditable);\n        if (color) {\n            node.style.backgroundColor = color;\n        }\n        node.setAttribute('contenteditable', 'false');\n        node.dataset.filtercodekey = this.id;\n        if (args.length > 0) {\n            node.dataset.filtercodeargs = args.join(' ');\n        }\n        if (this.around) {\n            node.classList.add(classFiltercodeBegin);\n        }\n        node.appendChild(document.createTextNode(`{${[this.id, ...args].join(' ')}}`));\n\n        return node;\n    }\n\n    /**\n     * @param  {string?} color\n     * @returns {HTMLSpanElement|null}\n     */\n    endSpan(color) {\n        const node = document.createElement('span');\n        node.classList.add(classFiltercode);\n        node.classList.add(classNonEditable);\n        if (color) {\n            node.style.backgroundColor = color;\n        }\n        node.setAttribute('contenteditable', 'false');\n        node.dataset.filtercodekey = this.id;\n        if (this.around) {\n            node.classList.add(classFiltercodeEnd);\n        }\n        node.appendChild(document.createTextNode(`{/${this.id}}`));\n\n        return node;\n    }\n\n    /**\n     * @return {StringRequest} a string request for the filtercode name\n     */\n    getStringRequest() {\n        if (this.stringRequest) {\n            return this.stringRequest;\n        }\n\n        return {\n            key: `filtercodes:code:${this.id}`,\n            component,\n        };\n    }\n\n    /**\n     * @return {StringRequest} a string request for the filtercode description\n     */\n    getDescriptionStringRequest() {\n        if (this.descriptionStringRequest) {\n            return this.descriptionStringRequest;\n        }\n\n        return {\n            key: `filtercodes:description:${this.id}`,\n            component,\n        };\n    }\n\n    /**\n     * @return {string} the unique key for this filtercode.\n     */\n    getKey() {\n        return `code:${this.id}`;\n    }\n}\n\nexport class Group {\n    /**\n     * @param {string} id\n     * @param {Filtercode[]} codes\n     */\n    constructor(id, codes) {\n        this.id = id;\n        this.codes = codes;\n    }\n\n    /**\n     * @return {StringRequest} a string request for the group name\n     */\n    getStringRequest() {\n        return {\n            key: `filtercodes:group:${this.id}`,\n            component,\n        };\n    }\n\n    /**\n     * @return {string} the unique key for this group.\n     */\n    getKey() {\n        return `group:${this.id}`;\n    }\n}\n\nconst selectImagesize = new SelectArg('imagesize', ['sm', 'md', 'lg'], false, false, false);\nconst selectDatetimeformat = new SelectArg('datetimeformat', [\n    'backupnameformat',\n    'strftimedate',\n    'strftimedatemonthabbr',\n    'strftimedatefullshort',\n    'strftimedateshort',\n    'strftimedateshortmonthabbr',\n    'strftimedatetime',\n    'strftimedaydate',\n    'strftimedaydatetime',\n    'strftimedayshort',\n    'strftimedaytime',\n    'strftimemonthyear',\n    'strftimerecent',\n    'strftimerecentfull',\n    'strftimetime',\n    'strftimetime12',\n    'strftimetime24',\n], false, false, true);\nconst raw = new TextArg('raw', true);\n\n/**\n * @type {(Group | Filtercode)[]}\n */\nexport const filtercodes = [\n    new Group('profile', [\n        new Filtercode('firstname', [], false),\n        new Filtercode('surname', [], false),\n        new Filtercode('lastname', [], false),\n        new Filtercode('alternatename', [], false),\n        new Filtercode('city', [], false),\n        new Filtercode('country', [], false),\n        new Filtercode('timezone', [], false),\n        new Filtercode('preferredlanguage', [], false),\n        new Filtercode('email', [], false),\n        new Filtercode('userid', [], false),\n        new Filtercode('idnumber', [], false),\n        new Filtercode('username', [], false),\n        new Filtercode('userdescription', [], false),\n        new Filtercode('webpage', [], false),\n        new Filtercode('institution', [], false),\n        new Filtercode('department', [], false),\n        new Filtercode('userpictureurl', [selectImagesize], false),\n        new Filtercode('userpictureimg', [selectImagesize], false),\n        new Filtercode('profile_field_shortname', [], false),\n        new Filtercode('profilefullname', [], false),\n        new Filtercode('firstaccessdate', [selectDatetimeformat], false),\n        new Filtercode('lastlogin', [selectDatetimeformat], false),\n    ]),\n    new Group('systeminformation', [\n        new Filtercode('filtercodes', [], false),\n        new Filtercode('usercount', [], false),\n        new Filtercode('usersactive', [], false),\n        new Filtercode('usersonline', [], false),\n        new Filtercode('userscountrycount', [], false),\n        new Filtercode('siteyear', [], false),\n        new Filtercode('sitename', [], false),\n        new Filtercode('sitesummary', [], false),\n        new Filtercode('sitelogourl', [], false),\n        new Filtercode('now', [selectDatetimeformat], false),\n        new Filtercode('coursecount', [], false),\n        new Filtercode('diskfreespace', [], false),\n        new Filtercode('diskfreespacedata', [], false),\n        new Filtercode('wwwroot', [], false),\n        new Filtercode('supportname', [], false),\n        new Filtercode('supportemail', [], false),\n        new Filtercode('supportpage', [], false),\n        new Filtercode('supportservicespage', [], false),\n    ]),\n    new Group('uielements', [\n        new Filtercode('teamcards', [], false),\n        new Filtercode('coursecards', ['categoryid?'], false),\n        new Filtercode('coursecard', ['courseid+'], false),\n        new Filtercode('coursecardsbyenrol', [], false),\n        new Filtercode('courseprogress', [], false),\n        new Filtercode('courseprogresspercent', [], false),\n        new Filtercode('courseprogressbar', [], false),\n        new Filtercode('categorycards', ['categoryid?'], false),\n        new Filtercode('mycourses', [], false),\n        new Filtercode('myccourses', [], false),\n        new Filtercode('mycoursescards', ['categoryid+'], false),\n        new Filtercode('courserequest', [], false),\n        new Filtercode('label', [\n            new SelectArg('labeltype', ['info', 'important', 'secondary', 'success', 'warning'], true),\n        ], true),\n        new Filtercode('button', [new TextArg('url')], true),\n        new Filtercode('chart', [\n            new SelectArg('charttype', ['radial', 'pie', 'progressbar', 'progresspie']),\n            raw,\n        ], false),\n        new Filtercode('showmore', [], true),\n        new Filtercode('qrcode', [], true),\n        new Filtercode('dashboard_siteinfo', [], false),\n        new Filtercode('keyboard', [], true),\n    ]),\n    new Group('course', [].concat([\n        new Filtercode('coursename', ['courseid?'], false),\n        new Filtercode('courseshortname', [], false),\n        new Filtercode('coursestartdate', [selectDatetimeformat, 'courseid?'], false),\n        new Filtercode('courseenddate', [selectDatetimeformat], false),\n        new Filtercode('courseenrolmentdate', [selectDatetimeformat], false),\n        new Filtercode('coursecompletiondate', [selectDatetimeformat], false),\n        new Filtercode('coursegradepercent', [], false),\n        new Filtercode('coursegrade', [], false),\n        new Filtercode('courseprogress', [], false),\n        new Filtercode('courseprogressbar', [], false),\n        new Filtercode('course_fields', [], false),\n        ],\n        coursecustomfields.map(field => new Filtercode(\n            `course_field_${field}`,\n            [],\n            false,\n            {\n                key: 'filtercodes:code:course_field',\n                component,\n                param: `course_field_${field}`,\n            },\n            {\n                key: 'filtercodes:description:course_field',\n                component,\n                param: `course_field_${field}`,\n            },\n        )),\n        [\n            new Filtercode('coursesummary', ['courseid?'], false),\n            new Filtercode('courseimage', [], false),\n            new Filtercode('courseimage-url', [], false),\n            new Filtercode('courseparticipantcount', [], false),\n            new Filtercode('coursecount', [new TextArg('coursecountrole')], false), // TODO IMPLEMENT COURSECOUNTROLE\n            new Filtercode('courseid', [], false),\n            new Filtercode('coursecontextid', [], false),\n            new Filtercode('coursemoduleid', [], false),\n            new Filtercode('courseidnumber', [], false),\n            new Filtercode('sectionid', [], false),\n            new Filtercode('sectionname', [], false),\n            new Filtercode('coursecontacts', [], false),\n            new Filtercode('mygroups', [], false),\n            new Filtercode('mygroupings', [], false),\n        ],\n    )),\n    new Group('categories', [\n        new Filtercode('categoryid', [], false),\n        new Filtercode('categoryname', [], false),\n        new Filtercode('categorynumber', [], false),\n        new Filtercode('categorydescription', [], false),\n        new Filtercode('categories', [], false),\n        new Filtercode('categories0', [], false),\n        new Filtercode('categoriesx', [], false),\n    ]),\n    new Group('custommenu', [\n        new Filtercode('categoriesmenu', [], false),\n        new Filtercode('categories0menu', [], false),\n        new Filtercode('categoriesxmenu', [], false),\n        new Filtercode('toggleeditingmenu', [], false),\n        new Filtercode('mycoursesmenu', [], false),\n        new Filtercode('courserequestmenu0', [], false),\n        new Filtercode('courserequestmenu', [], false),\n        new Filtercode('menuadmin', [], false),\n        new Filtercode('menudev', [], false),\n        new Filtercode('menuthemes', [], false),\n        new Filtercode('menucoursemore', [], false),\n        new Filtercode('menuwishlist', [], false),\n    ]),\n    new Group('url', [\n        new Filtercode('pagepath', [], false),\n        new Filtercode('thisurl', [], false),\n        new Filtercode('thisurl_enc', [], false),\n        new Filtercode('urlencode', [], true),\n        new Filtercode('rawurlencode', [], true),\n        new Filtercode('referer', [], false),\n        new Filtercode('protocol', [], false),\n        new Filtercode('referrer', [], false),\n        new Filtercode('ipaddress', [], false),\n        new Filtercode('sesskey', [], false),\n        new Filtercode('wwwcontactform', [], false),\n    ]),\n    new Group('content', [\n        new Filtercode('note', [], true),\n        new Filtercode('help', [], true),\n        new Filtercode('info', [], true),\n        new Filtercode('alert',\n            [new SelectArg('alerttype', [\n                'primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark', 'border',\n            ], false)],\n            true\n        ),\n        new Filtercode('highlight', [], true),\n        new Filtercode('marktext', [], true),\n        new Filtercode('markborder', [], true),\n        new Filtercode('getstring', [new TextArg('component_name', true)], true), // TODO Fetch available components\n        new Filtercode('fa', [new TextArg('faicon')], false),\n        new Filtercode('fas', [new TextArg('faicon')], false),\n        new Filtercode('fab', [new TextArg('faicon')], false),\n        new Filtercode('fa-solid', [new TextArg('faicon')], false),\n        new Filtercode('fa-brands', [new TextArg('faicon')], false),\n        new Filtercode('glyphicon', [new TextArg('glyphicon')], false),\n    ]),\n    new Group('customcontent', customcontent.map(content => new Filtercode(\n        `global_${content.key}`,\n        [],\n        false,\n        {\n            key: 'filtercodes:code:global',\n            component,\n            param: `global_${content.key}`,\n        },\n        {\n            key: 'filtercodes:description:global',\n            component,\n            param: `global_${content.key}`,\n        },\n    ))),\n    new Group('conditionallogin', [\n        new Filtercode('ifloggedin', [], true),\n        new Filtercode('ifloggedout', [], true),\n        new Filtercode('ifloggedinas', [], true),\n        new Filtercode('ifnotloggedinas', [], true),\n    ]),\n    new Group('conditionalcourse', [\n        new Filtercode('ifenrolpage', [], true),\n        new Filtercode('ifnotenrolpage', [], true),\n        new Filtercode('ifenrolled', [], true),\n        new Filtercode('ifnotenrolled', [], true),\n        new Filtercode('ifincourse', [], true),\n        new Filtercode('ifnotincourse', [], true),\n        new Filtercode('ifinsection', [], true),\n        new Filtercode('ifnotinsection', [], true),\n        new Filtercode('ifingroup', ['groupidnumber'], true),\n        new Filtercode('ifnotingroup', ['groupidnumber'], true),\n        new Filtercode('ifingrouping', ['groupingidnumber'], true),\n        new Filtercode('ifnotingrouping', ['groupingidnumber'], true),\n        new Filtercode('ifvisible', [], true),\n        new Filtercode('ifnotvisible', [], true),\n        new Filtercode('ifinactivity', [], true),\n        new Filtercode('ifnotinactivity', [], true),\n        new Filtercode('ifactivitycompleted', [new TextArg('activityid')], true), // TODO IMPLEMENT ACTIVITYID\n        new Filtercode('ifnotactivitycompleted', [new TextArg('activityid')], true), // TODO IMPLEMENT ACTIVITYID\n    ]),\n    new Group('conditionalrole', [\n        new Filtercode('ifguest', [], true),\n        new Filtercode('ifstudent', [], true),\n        new Filtercode('ifminstudent', [], true),\n        new Filtercode('ifassistant', [], true),\n        new Filtercode('ifminassistant', [], true),\n        new Filtercode('ifteacher', [], true),\n        new Filtercode('ifminteacher', [], true),\n        new Filtercode('ifcreator', [], true),\n        new Filtercode('ifmincreator', [], true),\n        new Filtercode('ifmanager', [], true),\n        new Filtercode('ifminmanager', [], true),\n        new Filtercode('ifminsitemanager', [], true),\n        new Filtercode('ifadmin', [], true),\n        new Filtercode('ifcustomrole', [new TextArg('roleshortname')], true), // TODO IMPLEMENT ROLESHORTNAME\n        new Filtercode('ifnotcustomrole', [new TextArg('roleshortname')], true), // TODO IMPLEMENT ROLESHORTNAME\n        new Filtercode('ifincohort', [new TextArg('cohortidnumber')], true), // TODO IMPLEMENT COHORTIDNUMBER\n        new Filtercode('ifnotincohort', [new TextArg('cohortidnumber')], true), // TODO IMPLEMENT COHORTIDNUMBER\n        new Filtercode('ifhasarolename', [new TextArg('roleshortname')], true), // TODO IMPLEMENT ROLESHORTNAME\n    ]),\n    new Group('miscellaneous', [\n        new Filtercode('ifdev', [], true),\n        new Filtercode('ifhome', [], true),\n        new Filtercode('ifnothome', [], true),\n        new Filtercode('ifdashboard', [], true),\n        new Filtercode('ifcourserequests', [], true),\n        new Filtercode('ifeditmode', [], true),\n        // TODO Fetch available themes\n        new Filtercode('iftheme', [new TextArg('themename')], true),\n        new Filtercode('ifnottheme', [new TextArg('themename')], true),\n        new Filtercode('ifprofile_field_shortname', [], true),\n        new Filtercode('ifprofile', [\n            new SelectArg('profilefieldname', [\n                'firstname', 'lastname', 'alternatename', 'city', 'country', 'timezone', 'preferredlanguage', 'email',\n                'userid', 'idnumber', 'username', 'userdescription', 'webpage', 'institution', 'department',\n                'profile_field_shortname', 'profilefullname', 'firstaccessdate', 'lastlogin',\n            ]),\n            new SelectArg('operator', ['is', 'not', 'contains']),\n            new QuotedTextArg('value'),\n        ], true),\n    ]),\n    new Group('conditionalmobile', [\n        new Filtercode('ifmobile', [], true),\n        new Filtercode('ifnotmobile', [], true),\n    ]),\n    new Group('conditionalworkplace', [\n        new Filtercode('iftenant', [new TextArg('tenantidnumber')], true), // TODO IMPLEMENT TENANTIDNUMBER\n        new Filtercode('ifworkplace', [], true),\n    ]),\n    new Group('lang', [\n        new Filtercode('-', [], false),\n        new Filtercode('nbsp', [], false),\n        new Filtercode('hr', [], false),\n        new Filtercode('multilang', [new TextArg('langcode')], true),\n        new Filtercode('langx', [new TextArg('langcode')], true),\n    ]),\n];\n\n/**\n * @type {{[key: string]: Filtercode}}\n */\nexport const filtercodeMap = (() => {\n    const map = {};\n    for (const grouporcode of filtercodes) {\n        if (grouporcode instanceof Group) {\n            for (const code of grouporcode.codes) {\n                map[code.id] = code;\n            }\n        } else {\n            map[grouporcode.id] = grouporcode;\n        }\n    }\n    return map;\n})();\n\n/**\n * @type {{[key: string]: StringRequest}}\n */\nexport const filtercodeNameMap = (() => {\n    const map = {};\n    for (const grouporcode of filtercodes) {\n        if (grouporcode instanceof Group) {\n            map[grouporcode.getKey()] = grouporcode.getStringRequest();\n            for (const code of grouporcode.codes) {\n                map[code.getKey()] = code.getStringRequest();\n            }\n        } else {\n            map[grouporcode.getKey()] = grouporcode.getStringRequest();\n        }\n    }\n\n    return map;\n})();\n\nexport const trim = v => v.toString().replace(/^\\s+/, '').replace(/\\s+$/, '');\nexport const isNull = a => a === null || a === undefined;\n"],"names":["component","classFiltercodeLevel","i","classFiltercodeLevels","Array","from","length","_","SelectArg","constructor","id","values","allowCustom","multiple","empty","TextArg","placeholder","QuotedTextArg","Filtercode","args","around","stringRequest","descriptionStringRequest","beginSpan","color","node","document","createElement","classList","add","style","backgroundColor","setAttribute","dataset","filtercodekey","this","filtercodeargs","join","appendChild","createTextNode","endSpan","getStringRequest","key","getDescriptionStringRequest","getKey","Group","codes","selectImagesize","selectDatetimeformat","raw","filtercodes","concat","coursecustomfields","map","field","param","customcontent","content","filtercodeMap","grouporcode","code","filtercodeNameMap","v","toString","replace","a"],"mappings":"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"}