define("tiny_filtercodes/common",["exports","./staticajax!getCustomContentData","./staticajax!getCourseCustomFields"],(function(_exports,_staticajaxGetCustomContentData,_staticajaxGetCourseCustomFields){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Common values helper for the Moodle tiny_filtercodes plugin.
   *
   * @module     tiny_filtercodes
   * @author      Leon Camus
   * @copyright   2025 onwards Leon Camus
   * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.trim=_exports.regexTagStartEnd=_exports.pluginName=_exports.isNull=_exports.filtercodes=_exports.filtercodeNameMap=_exports.filtercodeMap=_exports.component=_exports.classNonEditable=_exports.classFiltercodeLevels=_exports.classFiltercodeLevel=_exports.classFiltercodeError=_exports.classFiltercodeEnd=_exports.classFiltercodeBegin=_exports.classFiltercode=_exports.TextArg=_exports.SelectArg=_exports.QuotedTextArg=_exports.Group=_exports.Filtercode=void 0,_staticajaxGetCustomContentData=_interopRequireDefault(_staticajaxGetCustomContentData),_staticajaxGetCourseCustomFields=_interopRequireDefault(_staticajaxGetCourseCustomFields);_exports.pluginName="tiny_filtercodes/plugin";const component="tiny_filtercodes";_exports.component=component;_exports.classNonEditable="mceNonEditable";_exports.classFiltercode="filtercodes-tag";_exports.classFiltercodeBegin="filtercodes-begin";_exports.classFiltercodeEnd="filtercodes-end";_exports.classFiltercodeError="filtercodes-error";const classFiltercodeLevel=i=>"filtercodes-level-"+i%10;_exports.classFiltercodeLevel=classFiltercodeLevel;const classFiltercodeLevels=Array.from({length:10},((_,i)=>classFiltercodeLevel(i)));_exports.classFiltercodeLevels=classFiltercodeLevels;_exports.regexTagStartEnd=/\{(\/)?\s*([a-zA-Z0-9]+)((?:\s+[^}\s]+)+)?\s*}/g;class SelectArg{constructor(id,values){let allowCustom=arguments.length>2&&void 0!==arguments[2]&&arguments[2],multiple=arguments.length>3&&void 0!==arguments[3]&&arguments[3],empty=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.id=id,this.values=values,this.allowCustom=allowCustom,this.multiple=multiple,this.empty=empty}}_exports.SelectArg=SelectArg;class TextArg{constructor(id){let empty=arguments.length>1&&void 0!==arguments[1]&&arguments[1],placeholder=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.id=id,this.empty=empty,this.placeholder=placeholder}}_exports.TextArg=TextArg;class QuotedTextArg{constructor(id){let placeholder=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.id=id,this.placeholder=placeholder}}_exports.QuotedTextArg=QuotedTextArg;class Filtercode{constructor(id,args,around){let stringRequest=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,descriptionStringRequest=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.id=id,this.args=args,this.around=around,this.stringRequest=stringRequest,this.descriptionStringRequest=descriptionStringRequest}beginSpan(args,color){const node=document.createElement("span");return node.classList.add("filtercodes-tag"),node.classList.add("mceNonEditable"),color&&(node.style.backgroundColor=color),node.setAttribute("contenteditable","false"),node.dataset.filtercodekey=this.id,node.dataset.filtercodeargs=args.join(" "),this.around&&node.classList.add("filtercodes-begin"),node.appendChild(document.createTextNode("{".concat([this.id,...args].join(" "),"}"))),node}endSpan(color){const node=document.createElement("span");return node.classList.add("filtercodes-tag"),node.classList.add("mceNonEditable"),color&&(node.style.backgroundColor=color),node.setAttribute("contenteditable","false"),node.dataset.filtercodekey=this.id,this.around&&node.classList.add("filtercodes-end"),node.appendChild(document.createTextNode("{/".concat(this.id,"}"))),node}getStringRequest(){return this.stringRequest?this.stringRequest:{key:"filtercodes:code:".concat(this.id),component:component}}getDescriptionStringRequest(){return this.descriptionStringRequest?this.descriptionStringRequest:{key:"filtercodes:description:".concat(this.id),component:component}}getKey(){return"code:".concat(this.id)}}_exports.Filtercode=Filtercode;class Group{constructor(id,codes){this.id=id,this.codes=codes}getStringRequest(){return{key:"filtercodes:group:".concat(this.id),component:component}}getKey(){return"group:".concat(this.id)}}_exports.Group=Group;const selectImagesize=new SelectArg("imagesize",["sm","md","lg"],!1,!1,!1),selectDatetimeformat=new SelectArg("datetimeformat",["backupnameformat","strftimedate","strftimedatemonthabbr","strftimedatefullshort","strftimedateshort","strftimedateshortmonthabbr","strftimedatetime","strftimedaydate","strftimedaydatetime","strftimedayshort","strftimedaytime","strftimemonthyear","strftimerecent","strftimerecentfull","strftimetime","strftimetime12","strftimetime24"],!1,!1,!0),raw=new TextArg("raw",!0),filtercodes=[new Group("profile",[new Filtercode("firstname",[],!1),new Filtercode("surname",[],!1),new Filtercode("lastname",[],!1),new Filtercode("alternatename",[],!1),new Filtercode("city",[],!1),new Filtercode("country",[],!1),new Filtercode("timezone",[],!1),new Filtercode("preferredlanguage",[],!1),new Filtercode("email",[],!1),new Filtercode("userid",[],!1),new Filtercode("idnumber",[],!1),new Filtercode("username",[],!1),new Filtercode("userdescription",[],!1),new Filtercode("webpage",[],!1),new Filtercode("institution",[],!1),new Filtercode("department",[],!1),new Filtercode("userpictureurl",[selectImagesize],!1),new Filtercode("userpictureimg",[selectImagesize],!1),new Filtercode("profile_field_shortname",[],!1),new Filtercode("profilefullname",[],!1),new Filtercode("firstaccessdate",[selectDatetimeformat],!1),new Filtercode("lastlogin",[selectDatetimeformat],!1)]),new Group("systeminformation",[new Filtercode("filtercodes",[],!1),new Filtercode("usercount",[],!1),new Filtercode("usersactive",[],!1),new Filtercode("usersonline",[],!1),new Filtercode("userscountrycount",[],!1),new Filtercode("siteyear",[],!1),new Filtercode("sitename",[],!1),new Filtercode("sitesummary",[],!1),new Filtercode("sitelogourl",[],!1),new Filtercode("now",[selectDatetimeformat],!1),new Filtercode("coursecount",[],!1),new Filtercode("diskfreespace",[],!1),new Filtercode("diskfreespacedata",[],!1),new Filtercode("wwwroot",[],!1),new Filtercode("supportname",[],!1),new Filtercode("supportemail",[],!1),new Filtercode("supportpage",[],!1),new Filtercode("supportservicespage",[],!1)]),new Group("uielements",[new Filtercode("teamcards",[],!1),new Filtercode("coursecards",["categoryid?"],!1),new Filtercode("coursecard",["courseid+"],!1),new Filtercode("coursecardsbyenrol",[],!1),new Filtercode("courseprogress",[],!1),new Filtercode("courseprogresspercent",[],!1),new Filtercode("courseprogressbar",[],!1),new Filtercode("categorycards",["categoryid?"],!1),new Filtercode("mycourses",[],!1),new Filtercode("myccourses",[],!1),new Filtercode("mycoursescards",["categoryid+"],!1),new Filtercode("courserequest",[],!1),new Filtercode("label",[new SelectArg("labeltype",["info","important","secondary","success","warning"],!0)],!0),new Filtercode("button",[new TextArg("url")],!0),new Filtercode("chart",[new SelectArg("charttype",["radial","pie","progressbar","progresspie"]),raw],!1),new Filtercode("showmore",[],!0),new Filtercode("qrcode",[],!0),new Filtercode("dashboard_siteinfo",[],!1),new Filtercode("keyboard",[],!0)]),new Group("course",[].concat([new Filtercode("coursename",["courseid?"],!1),new Filtercode("courseshortname",[],!1),new Filtercode("coursestartdate",[selectDatetimeformat,"courseid?"],!1),new Filtercode("courseenddate",[selectDatetimeformat],!1),new Filtercode("courseenrolmentdate",[selectDatetimeformat],!1),new Filtercode("coursecompletiondate",[selectDatetimeformat],!1),new Filtercode("coursegradepercent",[],!1),new Filtercode("coursegrade",[],!1),new Filtercode("courseprogress",[],!1),new Filtercode("courseprogressbar",[],!1),new Filtercode("course_fields",[],!1)],_staticajaxGetCourseCustomFields.default.map((field=>new Filtercode("course_field_".concat(field),[],!1,{key:"filtercodes:code:course_field",component:component,param:"course_field_".concat(field)},{key:"filtercodes:description:course_field",component:component,param:"course_field_".concat(field)}))),[new Filtercode("coursesummary",["courseid?"],!1),new Filtercode("courseimage",[],!1),new Filtercode("courseimage-url",[],!1),new Filtercode("courseparticipantcount",[],!1),new Filtercode("coursecount",[new TextArg("coursecountrole")],!1),new Filtercode("courseid",[],!1),new Filtercode("coursecontextid",[],!1),new Filtercode("coursemoduleid",[],!1),new Filtercode("courseidnumber",[],!1),new Filtercode("sectionid",[],!1),new Filtercode("sectionname",[],!1),new Filtercode("coursecontacts",[],!1),new Filtercode("mygroups",[],!1),new Filtercode("mygroupings",[],!1)])),new Group("categories",[new Filtercode("categoryid",[],!1),new Filtercode("categoryname",[],!1),new Filtercode("categorynumber",[],!1),new Filtercode("categorydescription",[],!1),new Filtercode("categories",[],!1),new Filtercode("categories0",[],!1),new Filtercode("categoriesx",[],!1)]),new Group("custommenu",[new Filtercode("categoriesmenu",[],!1),new Filtercode("categories0menu",[],!1),new Filtercode("categoriesxmenu",[],!1),new Filtercode("toggleeditingmenu",[],!1),new Filtercode("mycoursesmenu",[],!1),new Filtercode("courserequestmenu0",[],!1),new Filtercode("courserequestmenu",[],!1),new Filtercode("menuadmin",[],!1),new Filtercode("menudev",[],!1),new Filtercode("menuthemes",[],!1),new Filtercode("menucoursemore",[],!1),new Filtercode("menuwishlist",[],!1)]),new Group("url",[new Filtercode("pagepath",[],!1),new Filtercode("thisurl",[],!1),new Filtercode("thisurl_enc",[],!1),new Filtercode("urlencode",[],!0),new Filtercode("rawurlencode",[],!0),new Filtercode("referer",[],!1),new Filtercode("protocol",[],!1),new Filtercode("referrer",[],!1),new Filtercode("ipaddress",[],!1),new Filtercode("sesskey",[],!1),new Filtercode("wwwcontactform",[],!1)]),new Group("content",[new Filtercode("note",[],!0),new Filtercode("help",[],!0),new Filtercode("info",[],!0),new Filtercode("alert",[new SelectArg("alerttype",["primary","secondary","success","danger","warning","info","light","dark","border"],!1)],!0),new Filtercode("highlight",[],!0),new Filtercode("marktext",[],!0),new Filtercode("markborder",[],!0),new Filtercode("getstring",[new TextArg("component_name",!0)],!0),new Filtercode("fa",[new TextArg("faicon")],!1),new Filtercode("fas",[new TextArg("faicon")],!1),new Filtercode("fab",[new TextArg("faicon")],!1),new Filtercode("fa-solid",[new TextArg("faicon")],!1),new Filtercode("fa-brands",[new TextArg("faicon")],!1),new Filtercode("glyphicon",[new TextArg("glyphicon")],!1)]),new Group("customcontent",_staticajaxGetCustomContentData.default.map((content=>new Filtercode("global_".concat(content.key),[],!1,{key:"filtercodes:code:global",component:component,param:"global_".concat(content.key)},{key:"filtercodes:description:global",component:component,param:"global_".concat(content.key)})))),new Group("conditionallogin",[new Filtercode("ifloggedin",[],!0),new Filtercode("ifloggedout",[],!0),new Filtercode("ifloggedinas",[],!0),new Filtercode("ifnotloggedinas",[],!0)]),new Group("conditionalcourse",[new Filtercode("ifenrolpage",[],!0),new Filtercode("ifnotenrolpage",[],!0),new Filtercode("ifenrolled",[],!0),new Filtercode("ifnotenrolled",[],!0),new Filtercode("ifincourse",[],!0),new Filtercode("ifnotincourse",[],!0),new Filtercode("ifinsection",[],!0),new Filtercode("ifnotinsection",[],!0),new Filtercode("ifingroup",["groupidnumber"],!0),new Filtercode("ifnotingroup",["groupidnumber"],!0),new Filtercode("ifingrouping",["groupingidnumber"],!0),new Filtercode("ifnotingrouping",["groupingidnumber"],!0),new Filtercode("ifvisible",[],!0),new Filtercode("ifnotvisible",[],!0),new Filtercode("ifinactivity",[],!0),new Filtercode("ifnotinactivity",[],!0),new Filtercode("ifactivitycompleted",[new TextArg("activityid")],!0),new Filtercode("ifnotactivitycompleted",[new TextArg("activityid")],!0)]),new Group("conditionalrole",[new Filtercode("ifguest",[],!0),new Filtercode("ifstudent",[],!0),new Filtercode("ifminstudent",[],!0),new Filtercode("ifassistant",[],!0),new Filtercode("ifminassistant",[],!0),new Filtercode("ifteacher",[],!0),new Filtercode("ifminteacher",[],!0),new Filtercode("ifcreator",[],!0),new Filtercode("ifmincreator",[],!0),new Filtercode("ifmanager",[],!0),new Filtercode("ifminmanager",[],!0),new Filtercode("ifminsitemanager",[],!0),new Filtercode("ifadmin",[],!0),new Filtercode("ifcustomrole",[new TextArg("roleshortname")],!0),new Filtercode("ifnotcustomrole",[new TextArg("roleshortname")],!0),new Filtercode("ifincohort",[new TextArg("cohortidnumber")],!0),new Filtercode("ifnotincohort",[new TextArg("cohortidnumber")],!0),new Filtercode("ifhasarolename",[new TextArg("roleshortname")],!0)]),new Group("miscellaneous",[new Filtercode("ifdev",[],!0),new Filtercode("ifhome",[],!0),new Filtercode("ifnothome",[],!0),new Filtercode("ifdashboard",[],!0),new Filtercode("ifcourserequests",[],!0),new Filtercode("ifeditmode",[],!0),new Filtercode("iftheme",[new TextArg("themename")],!0),new Filtercode("ifnottheme",[new TextArg("themename")],!0),new Filtercode("ifprofile_field_shortname",[],!0),new Filtercode("ifprofile",[new SelectArg("profilefieldname",["firstname","lastname","alternatename","city","country","timezone","preferredlanguage","email","userid","idnumber","username","userdescription","webpage","institution","department","profile_field_shortname","profilefullname","firstaccessdate","lastlogin"]),new SelectArg("operator",["is","not","contains"]),new QuotedTextArg("value")],!0)]),new Group("conditionalmobile",[new Filtercode("ifmobile",[],!0),new Filtercode("ifnotmobile",[],!0)]),new Group("conditionalworkplace",[new Filtercode("iftenant",[new TextArg("tenantidnumber")],!0),new Filtercode("ifworkplace",[],!0)]),new Group("lang",[new Filtercode("-",[],!1),new Filtercode("nbsp",[],!1),new Filtercode("hr",[],!1),new Filtercode("multilang",[new TextArg("langcode")],!0),new Filtercode("langx",[new TextArg("langcode")],!0)])];_exports.filtercodes=filtercodes;const filtercodeMap=(()=>{const map={};for(const grouporcode of filtercodes)if(grouporcode instanceof Group)for(const code of grouporcode.codes)map[code.id]=code;else map[grouporcode.id]=grouporcode;return map})();_exports.filtercodeMap=filtercodeMap;const filtercodeNameMap=(()=>{const map={};for(const grouporcode of filtercodes)if(grouporcode instanceof Group){map[grouporcode.getKey()]=grouporcode.getStringRequest();for(const code of grouporcode.codes)map[code.getKey()]=code.getStringRequest()}else map[grouporcode.getKey()]=grouporcode.getStringRequest();return map})();_exports.filtercodeNameMap=filtercodeNameMap;_exports.trim=v=>v.toString().replace(/^\s+/,"").replace(/\s+$/,"");_exports.isNull=a=>null==a}));

//# sourceMappingURL=common.min.js.map