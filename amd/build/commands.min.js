define("tiny_filtercodes/commands",["exports","./common","core/str","./ui","./options"],(function(_exports,_common,_str,_ui,_options){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getSetup=void 0;_exports.getSetup=async()=>{const filtercodeNameMapKeys=Object.keys(_common.filtercodeNameMap),filtercodeNameMapValues=Object.values(_common.filtercodeNameMap),[buttonText,removeTag,editTag,...filtercodeStrings]=await(0,_str.getStrings)([{key:"filtercodes:filtercodes",component:_common.component},{key:"filtercodes:removetag",component:_common.component},{key:"filtercodes:edittag",component:_common.component},...filtercodeNameMapValues]),langKeys=Object.fromEntries(Array(filtercodeNameMapKeys.length).fill(0).map(((_,i)=>[filtercodeNameMapKeys[i],filtercodeStrings[i]])));return editor=>{(0,_options.filterCodesFilterExists)(editor)&&(editor.ui.registry.addNestedMenuItem(_common.component,{text:buttonText,getSubmenuItems:()=>_common.filtercodes.map((codeorgroup=>codeorgroup.codes?{type:"nestedmenuitem",text:langKeys[codeorgroup.getKey()],getSubmenuItems:()=>codeorgroup.codes.map((code=>({type:"menuitem",text:langKeys[code.getKey()],onAction:()=>(0,_ui.applyFiltercode)(editor,code.id)})))}:{type:"menuitem",text:langKeys[codeorgroup.getKey()],onAction:()=>(0,_ui.applyFiltercode)(editor,codeorgroup.id)}))}),editor.ui.registry.addButton(_common.component+"_remove",{icon:"remove",tooltip:removeTag,onAction:()=>(0,_ui.onDelete)(editor,event)}),editor.ui.registry.addButton(_common.component+"_edit",{icon:"edit-block",tooltip:editTag,onAction:()=>(0,_ui.onEdit)(editor,event)}),editor.ui.registry.addContextToolbar(_common.component,{predicate:node=>node.classList.contains(_common.classFiltercode)&&!node.classList.contains(_common.classFiltercodeError),items:["".concat(_common.component,"_edit"),"".concat(_common.component,"_remove")].join(" "),position:"node",scope:"node"}),editor.on("init",(()=>{(0,_ui.onInit)(editor)})),editor.on("BeforeGetContent",(format=>{(0,_ui.onBeforeGetContent)(editor,format)})),editor.on("focus",(()=>{(0,_ui.onFocus)(editor)})),editor.on("submit",(()=>{(0,_ui.onSubmit)(editor)})),editor.on("keydown",(event=>{(0,_ui.onDelete)(editor,event)})))}}}));

//# sourceMappingURL=commands.min.js.map